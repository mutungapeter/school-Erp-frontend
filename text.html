'use client';
import { DefaultLayout } from "@/src/components/layouts/DefaultLayout";
import { GoPlus } from "react-icons/go";
import { FaPlus } from "react-icons/fa6";
import { useGetStudentsQuery } from "@/redux/queries/students/studentsApi";
interface Student {
  id: number;
  first_name:string;
  last_name:string;
  admission_number:string;
  admission_date:string;
  birth_date:string;
  gender:string;
  admission_type:string;
  class_level: number;
}
const StudentsPage = () => {
  
  const {
    isLoading: loadingStudents,
    data: studentsData,
    refetch,
  } = useGetStudentsQuery(
    {
      limit: 10,},
    { refetchOnMountOrArgChange: true }
  );
  console.log("studentsData", studentsData)
  return (
    <DefaultLayout>
      <div className="mt-[110px] grid grid-cols-8 gap-4">
        <div className="col-span-2 bg-white p-3 min-h-screen">
          <div className="mb-4 flex justify-center w-full">
            <div className="bg-[#36A000] w-full text-center justify-center text-white py-2 px-4 flex items-center space-x-3 rounded-md hover:bg-[#36A000]">
              <FaPlus color="white" size={20} />
              <span>Add New Student</span>
            </div>
          </div>
          <select className="w-full mb-4 py-2 px-4 rounded border border-[#1F4772] focus:outline-none focus:bg-white">
            <option value="">All students</option>
            <option value="10A">10A</option>
            <option value="11B">11B</option>
            <option value="9C">9C</option>
          </select>
          <input
            type="text"
            placeholder="Find by Adm No"
            className="w-full mb-4 py-2 px-4 rounded-md border border-[#1F4772] focus:outline-none focus:bg-white  "
          />
        </div>

        <div className="col-span-6 relative overflow-x-auto rounded-md">
          <table className="w-full bg-white text-sm border text-left rounded-md rtl:text-right text-gray-500 ">
            <thead className="text-xs text-gray-700 uppercase border-b bg-gray-50 rounded-t-md">
              <tr>
                <th scope="col" className="px-6 py-3">
                  #
                </th>
                <th scope="col" className="px-6 py-3">
                  Name
                </th>
                <th scope="col" className="px-6 py-3">
                  Adm No
                </th>
                <th scope="col" className="px-6 py-3">
                  Class
                </th>
                <th scope="col" className="px-6 py-3">
                  Gender
                </th>
                <th scope="col" className="px-6 py-3">
                  DOB
                </th>
                <th scope="col" className="px-6 py-3">
                  Adm Date
                </th>
                <th scope="col" className="px-6 py-3">
                  Adm Type
                </th>
                <th scope="col" className="px-6 py-3">
                Actions
                </th>
              </tr>
            </thead>
            <tbody>
              {loadingStudents ? (
                <tr>
                  <td colSpan={5} className="text-center py-4">
                    Loading...
                  </td>
                </tr>
              ) : studentsData && studentsData.length > 0 ? (
                studentsData.map((student:Student, index:number) => (
                  <tr key={student.id} className="bg-white border-b">
                    <th className="px-6 py-4 text-gray-900">{index + 1}</th>
                    <td className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                      {student.first_name} {student.last_name}
                    </td>
                    <td className="px-6 py-4">{student.admission_number}</td>
                    <td className="px-6 py-4">{student.class_level}</td>
                    <td className="px-6 py-4">{student.gender}</td>
                    <td className="px-6 py-4">{student.birth_date}</td>
                    <td className="px-6 py-4">{student.admission_date}</td>
                    <td className="px-6 py-4">{student.admission_type}</td>
                    <td className="px-6 py-4">Actions Here</td>
                  </tr>
                ))
              ) : (
                <tr>
                  <td colSpan={5} className="text-center py-4">
                    No students found.
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        </div>
      </div>
    </DefaultLayout>
  );
};
export default StudentsPage;
